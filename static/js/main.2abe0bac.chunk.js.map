{"version":3,"sources":["RoomContext.tsx","components/BUILDING/Background.tsx","utils.ts","components/BUILDING/Floor.tsx","components/BUILDING/Point.tsx","components/BUILDING/Segment.tsx","components/BUILDING/Size.tsx","components/BUILDING/Door.tsx","components/ELECTRICAL/Lamp.js","components/ELECTRICAL/Outlet.tsx","components/ELECTRICAL/Switch.js","components/ELECTRICAL/Circuit.jsx","components/ELECTRICAL/Component.jsx","components/BUILDING/Room.tsx","components/ELECTRICAL/Link.jsx","components/BUILDING/Plan.tsx","components/UI/QuickMenu.tsx","components/UI/SwitchProperties.jsx","components/UI/OutletProperties.jsx","components/UI/LampProperties.jsx","components/UI/CircuitChooser.jsx","components/UI/ComponentPropertiesMenu.jsx","components/UI/PreMenu.jsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["RoomContext","createContext","Background","width","height","useContext","__selectedRoom","__rooms","rooms","setRooms","setSelectedRoom","addRoom","e","id","window","prompt","find","room","alert","x","clientX","y","clientY","points","getPoints","this","reduce","acc","curr","i","absX","absY","offsetX","offsetY","doors","outlets","switches","lamps","components","style","tabIndex","fill","onDoubleClick","onClick","onKeyDown","keyCode","getPath","current","push","length","getAllPoints","roomPoints","getPointCoords","clickCoords","pathPoints","a","b","m","p","isFinite","project","atob","len","dot","t","Math","min","max","point","left","Floor","polygon","roomId","isSelected","setPointer","setQuickMenuPosition","setQuickMenuState","stroke","strokeWidth","Point","visible","roomIndex","findIndex","handle","onDrag","dnd","deltaX","deltaY","onStop","forEach","otherPoint","abs","className","cx","cy","r","textAnchor","alignmentBaseline","pointerEvents","Segment","__quickMenuPosition","__quickMenuState","__selectedPathPoints","__pointer","__node","setSelectedPathPoints","setNode","useState","isDragging","setIsDragging","data","path","line","d","segmentClicked","preventDefault","coords","type","console","log","originalEvent","changedTouches","prev","target","allPoints","pathPoint","cancel","visibility","strokeLinecap","strokeLinejoin","opacity","Size","dx","dy","c","round","floor","sqrt","startOffset","xlinkHref","Door","door","pointsIds","doorCenter","doorId","split","side1","side2","p1","p2","newDoorCenter","newPoint","x1","y1","x2","y2","Lamp","props","transform","Outlet","grounding","shutter","angle","cursor","fontSize","Switch","pole","way","dimmer","vectorEffect","Circuit","circuit","fontWeight","name","number","toUpperCase","Component","component","__componentPropertiesMenu","__linkers","__links","__anchorEl","__preMenu","__selectedComponent","__isLinking","linkers","setLinkers","links","setLinks","setAnchorEl","setPreMenu","setSelectedComponent","isLinking","setIsLinking","anchorPoint","category","node","isHovered","setIsHovered","box","setBox","refComponent","useRef","useEffect","getBBox","nodeName","aId","bId","atan2","PI","newAnchorPoint","open","onMouseEnter","onMouseLeave","ref","switchRender","Room","disabled","roomClicked","newRooms","filter","el","outline","map","join","index","key","Link","link","getBoundingClientRect","start","right","top","bottom","end","ctrl1","ctrl2","strokeDasharray","Plan","__components","selectedRoom","innerWidth","innerHeight","xmlns","xmlnsXlink","sort","QuickMenu","quickMenuPosition","quickMenuState","selectedPathPoints","pointer","handleClose","addComponent","illuminated","Menu","transitionDuration","enter","exit","anchorReference","anchorPosition","undefined","onClose","MenuItem","point1","point2","splice","SwitchProperties","handleChange","Grid","container","direction","spacing","item","xs","ToggleButtonGroup","exclusive","aria-label","value","onChange","ToggleButton","selected","OutletProperties","justify","textAlign","LampProperties","CircuitChooser","setName","TextField","label","margin","variant","ComponentPropertiesMenu","componentPropertiesMenu","setComponentPropertiesMenu","componentIndex","newValue","currentTarget","isNaN","parseInt","property","circuitName","all","toLowerCase","getAllElementsOnCircuit","Dialog","DialogTitle","Typography","renderSwitch","Button","color","fullWidth","PreMenu","preMenu","anchorEl","selectedComponent","onMouseDown","App","__doors","CTX","overscrollBehavior","onContextMenu","Provider","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2abe0bac.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nexport const RoomContext = createContext(null) \n","import React, { useContext } from \"react\";\nimport { RoomContext } from '../../RoomContext'\n\nexport default function Background({\n    width,\n    height,\n}: {\n    width: number;\n    height: number;\n}) {\n\n    const { __selectedRoom, __rooms } = useContext(RoomContext)\n\n    const [rooms, setRooms] = __rooms\n    const setSelectedRoom = __selectedRoom[1]\n\n    const addRoom = (e: any) => {\n        const id = window.prompt(\"Dénomination de la pièce\");\n\n        if (id === '' || id === null) return\n\n        if (rooms.find((room) => room.id === id)) {\n            alert(`Une pièce nommée ${id} existe déjà. Création annulée !!!`);\n            return;\n        }\n\n        const room = {\n            id: id,\n            x : e.clientX ? e.clientX - 75 : width/2,\n            y : e.clientY ? e.clientY - 75 : height/2,\n            points: [\n                {x : 0, y : 0},\n                {x : 0, y : 200},\n                {x : 200, y : 200},\n                {x : 200, y : 0},\n            ],\n            getPoints() {\n                return this.points.reduce((acc, curr, i) => {\n                    acc[i] = {\n                        x : curr.x,\n                        y : curr.y,\n                        absX : curr.x + this.x,\n                        absY : curr.y + this.y,\n                        offsetX : this.x,\n                        offsetY : this.y,\n                        i,\n                        room : id,\n                        id : `${this.id}.${i}`\n                    }\n                    return acc\n                }, [])\n            },\n            doors : [],\n            outlets : [],\n            switches : [],\n            lamps : [],\n            components : []\n        };\n\n        setRooms([...rooms, room]);\n        setSelectedRoom(room.id);\n    }\n\n    const keyHandler = e => {\n        if (e.keyCode === 78) {\n            addRoom(e)\n        }\n    }\n\n    return (\n        <rect\n            style={{'outline':'none'}}\n            tabIndex={-1}\n            id=\"background\"\n            width={width}\n            height={height}\n            fill=\"#38a0f9\"\n            //fill=\"white\"\n            onDoubleClick={addRoom}\n            onClick={() => setSelectedRoom(null)}\n            onKeyDown={keyHandler}\n        />\n    );\n}\n","export function getPolygon(points) {\n    return points.map((point) => [point.x, point.y].join(\" \"));\n}\n\nexport function getPath(points) {\n    return points.reduce((acc, current, i) => {\n        acc[i] = [\n            current];\n        if (i > 0) {\n            acc[i - 1].push(current)\n        }\n        if (i === points.length - 1) acc[i].push(acc[0][0]);\n        return acc;\n    }, []);\n}\n\nexport function getAllPoints(rooms) {\n    let array = rooms.reduce((acc, curr, i) => {\n        const roomPoints = curr.getPoints()\n        acc.push(...roomPoints)\n        return acc\n    }, [])\n    return array\n}\n\nexport const getPointCoords = (clickCoords, pathPoints) => {   // y = m*x + p \n    const [a, b] = pathPoints\n    let [x, y] = clickCoords\n\n    //console.log('x', x)\n    //console.log('y', y)\n\n    const m = (b.y - a.y) / (b.x - a.x)\n    //console.log('m',m)\n    const p = a.y - m * a.x\n\n    if (m === 0) {\n        y = a.y\n    }\n    else if (!isFinite(m)) {\n        x = a.x\n    } else\n        y = m * x + p\n\n    return { x, y }\n\n}\n\nexport function getY(point, pathPoints) {\n\n    const [a, b] = pathPoints\n    // y = m * x + p\n    const dx = b.x - a.x\n    const dy = b.y - a.y\n    const m = dy / dx\n    const p = a.y - m * a.x\n\n    let x\n    let y\n\n    if (m === 0) {\n        x = point.x\n        y = a.y\n    } else if (!isFinite(m)) {\n        x = a.x\n        y = point.y\n    } else {\n        x = point.x\n        y = m * point.x + p\n    }\n    return { x, y }\n}\n\nexport function closestPointToSegment(point, a, b) {\n    //console.log(point)\n}\n\nexport function project(p, a, b) {\n\n    var atob = { x: b.x - a.x, y: b.y - a.y };\n    var atop = { x: p.x - a.x, y: p.y - a.y };\n    var len = atob.x * atob.x + atob.y * atob.y;\n    var dot = atop.x * atob.x + atop.y * atob.y;\n    var t = Math.min(1, Math.max(0, dot / len));\n\n    dot = (b.x - a.x) * (p.y - a.y) - (b.y - a.y) * (p.x - a.x);\n\n    return {\n        point: {\n            x: a.x + atob.x * t,\n            y: a.y + atob.y * t\n        },\n        left: dot < 1,\n        dot: dot,\n        t: t\n    };\n}\n\nexport function getAllElementsOnCircuit(rooms, circuitName) {\n\n    const all = rooms.reduce((acc, curr, i) => {\n        acc.push(...curr.components)\n        return acc\n    }, [])\n        .filter(el => {\n            return el.props.circuit.name.toLowerCase() === circuitName.toLowerCase()\n         })\n    console.log(all.length)\n    return all.length\n}","import React, { useContext } from \"react\";\nimport { RoomContext } from '../../RoomContext'\n\n\nexport default function Floor({ polygon, isSelected, roomId }) {\n\n    const { setPointer, setQuickMenuPosition, setQuickMenuState } = useContext(RoomContext)\n\n    return <polygon\n        id={`${roomId + '.floor'}`}\n        points={polygon}\n        fill=\"#ffffaa\"\n        stroke=\"steelblue\"\n        strokeWidth={8}\n    />;\n}\n","import React, { useContext } from \"react\";\nimport { RoomContext } from '../../RoomContext'\nimport { DraggableCore, DraggableData } from \"react-draggable\";\nimport { getAllPoints } from \"../../utils\";\n\nfunction Point({ point, visible, }) {\n\n    const { __rooms } = useContext(RoomContext)\n    const [rooms, setRooms] = __rooms\n\n    const roomIndex = rooms.findIndex(room => room.id === point.room)\n\n    if (!visible) {\n        return null;\n    }\n\n    const dragging = (e: any, dnd: DraggableData) => {\n\n        rooms[roomIndex].points[point.i].x = point.x + dnd.deltaX\n        rooms[roomIndex].points[point.i].y = point.y + dnd.deltaY\n\n        setRooms([...rooms])\n    };\n\n    const dragEnd = () => {\n\n        let allPoints = getAllPoints(rooms)\n\n\n        allPoints.forEach(otherPoint => {\n            if (otherPoint.room !== point.room || otherPoint.i !== point.i) {\n                if (Math.abs(point.absX - otherPoint.absX) < 16) {\n                    rooms[roomIndex].points[point.i].x = otherPoint.absX - point.offsetX\n                }\n                if (Math.abs(point.absY - otherPoint.absY) < 16) {\n                    rooms[roomIndex].points[point.i].y = otherPoint.absY - point.offsetY\n                }\n\n            }\n        })\n        setRooms([...rooms])\n    };\n\n    return (\n        <DraggableCore\n            handle=\".corner\"\n            onDrag={dragging}\n            onStop={dragEnd}\n        >\n            <g>\n                <circle\n                    className=\"corner\"\n                    cx={point.x}\n                    cy={point.y}\n                    r={16}\n                    fill={\"white\"}\n                    stroke={\"#38a0f9\"}\n                    strokeWidth={4}\n                />\n                <text\n                    x={point.x}\n                    y={point.y}\n                    textAnchor=\"middle\"\n                    alignmentBaseline=\"central\"\n                    pointerEvents=\"none\"\n                    fill=\"grey\"\n                >\n                    {point.i}\n                </text>\n            </g>\n        </DraggableCore>\n    );\n}\n\nexport default Point;\n","import React, { useState, useContext } from \"react\";\nimport { line } from \"d3-shape\";\nimport { DraggableCore } from \"react-draggable\";\nimport { RoomContext } from '../../RoomContext'\nimport { getAllPoints } from \"../../utils\";\n\nexport default function Segment({ pathPoints, visible, }) {\n\n    const { __quickMenuPosition, __quickMenuState, __selectedPathPoints, __rooms, __pointer, __node } = useContext(RoomContext)\n\n    const setQuickMenuPosition = __quickMenuPosition[1]\n    const setQuickMenuState = __quickMenuState[1]\n    const setSelectedPathPoints = __selectedPathPoints[1]\n    const [rooms, setRooms] = __rooms\n    const setPointer = __pointer[1]\n    const setNode = __node[1]\n\n    const [isDragging, setIsDragging] = useState(false)\n\n    let [a, b] = pathPoints;\n\n    const roomIndex = rooms.findIndex(room => room.id === a.room)\n\n    let data = [[a.x, a.y], [b.x, b.y]]\n\n    let path = line()\n        .x((d) => d[0])\n        .y((d) => d[1])\n\n    const dragging = (e, dnd) => {\n\n        setIsDragging(true)\n\n        a.x += dnd.deltaX\n        a.y += dnd.deltaY\n\n        b.x += dnd.deltaX\n        b.y += dnd.deltaY\n\n        rooms[roomIndex].points[a.i].x = a.x\n        rooms[roomIndex].points[a.i].y = a.y\n\n        rooms[roomIndex].points[b.i].x = b.x\n        rooms[roomIndex].points[b.i].y = b.y\n\n        setRooms([...rooms])\n    }\n\n    const dragEnd = (e, dnd) => {\n\n        if (!isDragging) {\n            segmentClicked(e)\n            return\n        }\n        setIsDragging(false)\n\n        let allPoints = getAllPoints(rooms)\n\n        pathPoints.forEach(pathPoint => {\n            allPoints.forEach(point => {\n                if (pathPoint.id !== point.id) {\n                    if (Math.abs(pathPoint.absX - point.absX) <= 16) {\n                        rooms[roomIndex].points[pathPoint.i].x = point.absX - pathPoint.offsetX\n                    }\n                    if (Math.abs(pathPoint.absY - point.absY) <= 16) {\n                        rooms[roomIndex].points[pathPoint.i].y = point.absY - pathPoint.offsetY\n                    }\n                }\n            });\n        });\n        setRooms([...rooms])\n    }\n\n    const segmentClicked = e => {\n        e.preventDefault()\n        \n        let coords = { x : null, y : null}\n        \n        if (e.type === 'mouseup') {\n            coords.x = e.clientX\n            coords.y = e.clientY\n            setPointer(coords)\n        } else {\n            console.log(e)\n            console.log(e.originalEvent)\n            coords.x = e.changedTouches[0].clientX\n            coords.y = e.changedTouches[0].clientY\n            setPointer(coords)\n        }\n\n\n        setQuickMenuPosition(coords)\n        setQuickMenuState(prev => !prev)\n        setSelectedPathPoints(pathPoints)\n        setNode(e.target)\n    }\n\n    // if (!visible) {\n    //     return null;\n    // }\n\n    return (\n        <DraggableCore\n            handle=\".segment\"\n            //onStart={() => setIsDragging(true)}\n            onDrag={dragging}\n            onStop={dragEnd}\n            cancel=\".doorCenter, .outlet\"\n        >\n            <path\n                style={visible ? { visibility: \"visible\" } : { visibility: 'hidden' }}\n                d={path(data)}\n                id={a.room + '.' + a.i + '.' + b.i}\n                className=\"segment\"\n                strokeWidth={20}\n                stroke=\"#77cfff\"\n                strokeLinecap='round'\n                strokeLinejoin='round'\n                opacity={0.8}\n            //onClick={e => segmentClicked(e)}\n            />\n        </DraggableCore>\n    );\n}\n","import React from \"react\";\n\nfunction Size({ pathPoints, visible }) {\n    const [a, b] = pathPoints;\n\n    var dx = a.x - b.x;\n    var dy = a.y - b.y;\n\n    var c = Math.round(Math.floor(Math.sqrt(dx * dx + dy * dy) / 5) * 5)\n    //console.log(c)\n\n    if (!visible) {\n        return null;\n    }\n\n    return ( // need to \n        <text\n            //transform='rotate(90 )'\n            style={{ pointerEvents: 'none', fill: '#404040' }}>\n            <textPath startOffset=\"45%\" xlinkHref={\"#\" + a.room + '.' + a.i + '.' + b.i}>\n                {c}\n            </textPath>\n        </text>\n    );\n}\n\nexport default Size;\n","import React, { useContext } from 'react'\nimport { project } from '../../utils'\nimport { RoomContext } from \"../../RoomContext\"\nimport { DraggableCore } from \"react-draggable\"\n\nexport default function Door({ door, i }) {\n\n    const { __rooms } = useContext(RoomContext)\n\n    const [rooms, setRooms] = __rooms\n\n    const { pointsIds, doorCenter, doorId } = door\n\n    const room = rooms.find(({ id }) => id === pointsIds.a.split('.')[0])\n\n    const a = room.getPoints().find(({ id }) => id === pointsIds.a)\n    const b = room.getPoints().find(({ id }) => id === pointsIds.b)\n\n    const side1 = { x: doorCenter.x - 50, y: doorCenter.y - 50 }\n    const side2 = { x: doorCenter.x + 50, y: doorCenter.y + 50 }\n\n    //console.log(side1)\n\n    const p1 = project(side1, a, b).point\n    const p2 = project(side2, a, b).point\n\n    const dragging = (e, dnd) => {\n\n        const newDoorCenter = { ...doorCenter }\n        newDoorCenter.x += dnd.deltaX\n        newDoorCenter.y += dnd.deltaY\n\n        const newPoint = project(newDoorCenter, a, b)\n\n        room.doors[i].doorCenter.x = newPoint.point.x\n        room.doors[i].doorCenter.y = newPoint.point.y\n        setRooms([...rooms])\n    }\n\n    return (\n\n        <DraggableCore\n            handle=\".doorCenter\"\n            onDrag={dragging}\n        >\n\n            <line\n                className='doorCenter'\n                id={doorId}\n                x1={p1.x}\n                y1={p1.y}\n                x2={p2.x}\n                y2={p2.y}\n                fill='#ffffaa'\n                stroke=\"#ffffaa\"\n                strokeWidth={8}\n            />\n\n\n        </DraggableCore>\n    )\n}\n","import React from 'react'\n\nfunction Lamp({ props }) {\n\n    return (\n\n        <g>\n\n            <title>Lighting</title>\n\n            <g\n                id=\"1\"\n                transform=\"rotate(45)\"\n                style={{ pointerEvents: 'all' }}\n            >\n                <title>Lighting</title>\n                <g id=\"2\" >\n                    <title>Lighting</title>\n                    <path\n                        className=\"component\"\n                        d=\"M-6 0 L6 0\"\n                        //stroke='black'\n                        strokeLinecap='round'\n                        strokeLinejoin='round'\n                        strokeWidth={1}\n                        fill='none'\n                    />\n                </g>\n                <g id=\"3\" >\n                    <title>Lighting</title>\n                    <path\n                        className=\"component\"\n                        d=\"M0 -6 L0 6\"\n                        //stroke='black'\n                        strokeLinecap='round'\n                        strokeLinejoin='round'\n                        strokeWidth={1}\n                        fill='none'\n                    />\n                </g>\n\n            </g>\n        </g>\n\n    )\n}\n\nexport default Lamp\n","import React from 'react'\n\nfunction Outlet(props) {\n\n    const { type, grounding, shutter } = props.props // WTF ???\n    const angle = props.angle\n\n    return (\n\n        <g\n            className='outlet'\n            style={{ pointerEvents: 'all' }}\n            transform='translate(0 -2) rotate(270)'\n        >\n            <text\n                cursor='default'\n                transform={`translate(10 0) rotate(${angle ? - angle : 0} )`}\n                fontSize={'40%'}\n                textAnchor='middle'\n                alignmentBaseline='central'\n            >\n                {type === 1 ? null : type}\n\n            </text>\n\n            <g id=\"2\"\n                transform={`translate(0 -6)`}\n\n            >\n                <path // ground\n                    d=\"M3.54 11.58 L3.54 0.24\"\n                    //stroke='black'\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={1}\n                    fill='none'\n                    visibility={grounding === true ? 'visible' : 'hidden'}\n                    className='component'\n                />\n\n                <path // protect left\n                    d=\"M8.27 1.2 L8.27 0.25\"\n                    //stroke='black'\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={1}\n                    fill='none'\n                    visibility={shutter === true ? 'visible' : 'hidden'}\n                    className='component'\n                />\n                <path // protect right\n                    d=\"M8.27 11.6 L8.27 10.65\"\n                    //stroke='black'\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={1}\n                    fill='none'\n                    visibility={shutter === true ? 'visible' : 'hidden'}\n                    className='component'\n                />\n                <path //arc\n                    d=\"M8.27 10.65 A4.72441 4.72441 0 0 1 3.55 5.93 A4.72441 4.72441 0 0 1 8.27 1.2\"\n                    //stroke='black'\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={1}\n                    fill='none'\n                    className='component'\n                />\n                <path //foot\n                    d=\"M3.54 5.92 L-0 5.92\"\n                    id='coucou'\n                    //stroke='black'\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={1}\n                    fill='none'\n                    className='component'\n                />\n            </g>\n        </g>\n    )\n}\n\nexport default Outlet\n","import React from 'react'\n\nfunction Switch(props, angle) {\n\n    const { type, pole, way, dimmer } = props.props // wtf\n    \n    return (\n            <g\n                className='switch'\n                style={{ pointerEvents: 'all' }}\n            >\n\n                <g id=\"1\"\n                >\n                    <g id=\"2\"\n                        transform='translate(-5 -17)'\n                    >\n                        {/* <title>Double pole change over switch</title> */}\n                        <path\n                            d=\"M8.55 10.53 A2.83465 2.83465 0 1 1 2.88 10.53 A2.83465 2.83465 0 1 1 8.55 10.53 Z\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            className='component'\n                        />\n                        <path // Only for pushButton\n                            d=\"M8.55 10.53 A2.83465 2.83465 0 1 1 2.88 10.53 A2.83465 2.83465 0 1 1 8.55 10.53 Z\"\n                            transform='translate(-4.5 -8.5) scale(1.8) '\n                            vectorEffect=\"non-scaling-stroke\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1.5}\n                            fill='none'\n                            visibility={ type === \"push\" ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n                        <path // double pole\n                            d=\"M8.68 2.39 L10.65 3.11\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={pole === 2 && type === 'switch' ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n                        <path // main switch \n                            d=\"M6.69 7.87 L9.46 0.24 L11.44 0.96\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={type === 'push' ? 'hidden' : 'visible'}\n                            className='component'\n                        />\n                        <path // only for inverter \n                            d=\"M6.69 7.87 L9.46 0.24 L11.44 0.96\"\n                            transform='scale(-1, 1) translate(-11 0)'\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={type === 'inverter' ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n\n                        <path // double pole ????\n                            d=\"M8.55 10.53 A2.83465 2.83465 0 1 1 2.88 10.53 A2.83465 2.83465 0 1 1 8.55 10.53\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={pole === 2 && type === 'switch' ? 'hidden' : 'hidden'}\n                            className='component'\n                        />\n                        <path // double pole\n                            d=\"M2.76 18.68 L0.78 17.96\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={pole === 2 && type === 'switch' && way === 2 ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n                        <path // second throw\n                            d=\"M4.75 13.2 L1.97 20.83 L0 20.11\"\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={way === 2 && type === 'switch' || type === 'inverter' ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n                        <path // second throw only for inverter\n                            d=\"M4.75 13.2 L1.97 20.83 L0 20.11\"\n                            transform='scale(-1, 1) translate(-11 0)'\n                            strokeLinecap='round'\n                            strokeLinejoin='round'\n                            strokeWidth={1}\n                            fill='none'\n                            visibility={type === 'inverter' ? 'visible' : 'hidden'}\n                            className='component'\n                        />\n                    </g>\n                </g>\n            </g>\n    )\n}\n\nexport default Switch\n","import React from 'react'\n\nfunction Circuit(props, angle) {\n\n    const circuit = props.circuit\n\n    return (\n        <text\n            cursor='default'\n            fontSize='0.6em'\n            fontWeight='small'\n            transform={`translate(0 -17) )`}\n            textAnchor='middle'\n        >\n            { \n            `${circuit.name}${circuit.number}`.toUpperCase()\n            } \n        </text>\n    )\n}\n\nexport default Circuit\n","import React, { useContext, useState, useRef, useEffect } from 'react'\nimport { RoomContext } from '../../RoomContext'\nimport { DraggableCore } from 'react-draggable'\nimport { project } from '../../utils'\nimport \"./../../svg.css\";\n\nimport Lamp from './Lamp'\nimport Outlet from './Outlet'\nimport Switch from './Switch'\nimport Circuit from './Circuit'\n//import Linker from './Linker'\n\nfunction Component({ component, i }) {\n\n    const { __rooms, __componentPropertiesMenu, __linkers, __links, __anchorEl, __preMenu, __selectedComponent, __isLinking } = useContext(RoomContext)\n    const [rooms, setRooms] = __rooms\n    const [componentPropertiesMenu, setComponentPropertiesMenu] = __componentPropertiesMenu\n    const [linkers, setLinkers] = __linkers\n    const [links, setLinks] = __links\n    const [anchorEl, setAnchorEl] = __anchorEl\n    const [preMenu, setPreMenu] = __preMenu\n    const [selectedComponent, setSelectedComponent] = __selectedComponent\n    const [isLinking, setIsLinking] = __isLinking\n\n    const room = rooms.find(({ id }) => id === component.room.id)\n    const { anchorPoint, category, node } = component\n    let { x, y } = anchorPoint\n\n    const [isDragging, setIsDragging] = useState(false)\n    const [isHovered, setIsHovered] = useState(false)\n    const [box, setBox] = useState({})\n\n    const refComponent = useRef();\n\n    useEffect(() => {\n        const { current } = refComponent\n        setBox(current.getBBox())\n    }, [component.props.type])\n\n    useEffect(() => {\n        if (linkers.length === 1) {\n            setIsLinking(true)\n        }\n        else {\n            setIsLinking(false)\n        }\n\n        if (linkers.length >= 2) {\n            setLinks([...links, linkers])\n            setLinkers([])\n        }\n    }, [linkers])\n\n\n\n    if (!component) {\n        return null\n    }\n\n\n    \n\n\n\n    if (component.node.nodeName === 'path') {\n\n        const aId = node.id.split('.')[0] + '.' + node.id.split('.')[1]\n        const bId = node.id.split('.')[0] + '.' + node.id.split('.')[2]\n\n        const a = room.getPoints().find(({ id }) => id === aId)\n        const b = room.getPoints().find(({ id }) => id === bId)\n\n        const newPoint = project(anchorPoint, a, b)\n\n        x = newPoint.point.x\n        y = newPoint.point.y\n\n        var angle = (Math.atan2(b.y - a.y, b.x - a.x) * 180 / Math.PI) - 90;\n    }\n\n    const dragging = (e, dnd) => {\n        setIsDragging(true)\n\n        const newAnchorPoint = { ...anchorPoint }\n        newAnchorPoint.x += dnd.deltaX\n        newAnchorPoint.y += dnd.deltaY\n\n        if (component.node.nodeName === 'path') {\n            const aId = node.id.split('.')[0] + '.' + node.id.split('.')[1]\n            const bId = node.id.split('.')[0] + '.' + node.id.split('.')[2]\n\n            const a = room.getPoints().find(({ id }) => id === aId)\n            const b = room.getPoints().find(({ id }) => id === bId)\n            const newPoint = project(newAnchorPoint, a, b)\n\n            room.components[i].anchorPoint.x = newPoint.point.x\n            room.components[i].anchorPoint.y = newPoint.point.y\n        }\n        else {\n            room.components[i].anchorPoint.x = newAnchorPoint.x\n            room.components[i].anchorPoint.y = newAnchorPoint.y\n        }\n        setRooms([...rooms])\n    }\n\n    const dragEnd = e => {\n        if (!isDragging) {\n            if (isLinking) {\n                setLinkers(prev => [...prev, refComponent.current])  \n                return \n            }\n            setAnchorEl(refComponent.current)\n            setPreMenu({open : true})\n            setSelectedComponent(component)\n        }\n        setIsDragging(false)\n    }\n\n    const switchRender = (category) => {\n        switch (category) {\n            case 'switch':\n                return <Switch props={component.props} angle={angle} />\n            case 'outlet':\n                return <Outlet props={component.props} angle={angle} />\n            case 'lamp':\n                return <Lamp props={component.props} angle={angle} />\n            default:\n                return null\n        }\n    }\n\n    \n    return (\n        <DraggableCore\n            handle={'.' + component.category}\n            onDrag={dragging}\n            onStop={dragEnd}\n        >\n            <g // component Wrapper\n                className={category}\n                id={component.id}\n                transform={`translate(${x} ${y}) scale(1.75) `}\n                pointerEvents='all'\n                onMouseEnter={() => setIsHovered(true)}\n                onMouseLeave={() => setIsHovered(false)}\n            >\n                <rect // bbox\n                    className='bbox'\n                    transform={`rotate(${angle ? (angle === 0 ? 80 : angle + 90) : 0}) `}\n                    x={box.x}\n                    y={box.y}\n                    width={box.width}\n                    height={box.height}\n                    fill='steelblue'\n                    opacity={0.3}\n                    visibility={isHovered ? 'visible' : 'hidden'}\n\n                />\n\n                <g // component\n                    className={`component ${isLinking ? 'linking' : null}`}\n                    ref={refComponent}\n                    transform={`rotate(${angle ? (angle === 0 ? 80 : angle + 90) : 0}) `}\n                    stroke='black'\n                    strokeWidth='.2'\n\n                >\n                    {switchRender(component.category)}\n                </g>\n\n                <g // circuit wrapper\n                    className='circuit'\n                    transform={`rotate(${angle ? (angle === 0 ? 80 : angle + 90) : 90}) translate (${0} ${box.y}) `}\n\n                >\n                    <Circuit circuit={component.props.circuit} />\n                </g>\n\n            </g>\n\n\n        </DraggableCore>\n    )\n}\n\nexport default Component\n","import React, { useContext, useState } from \"react\";\nimport { RoomContext } from '../../RoomContext'\nimport { DraggableCore, DraggableData } from \"react-draggable\";\nimport { getPath, getPolygon, getAllPoints } from \"../../utils\";\nimport Floor from \"./Floor\";\nimport Point from \"./Point\";\nimport Segment from \"./Segment\";\nimport Size from \"./Size\";\nimport Door from './Door'\nimport Outlet from '../ELECTRICAL/Outlet'\nimport Switch from '../ELECTRICAL/Switch'\nimport Lamp from '../ELECTRICAL/Lamp'\nimport Component from './../ELECTRICAL/Component'\n\n\nfunction Room({\n    isSelected,\n    room,\n    i\n}) {\n\n    const { __rooms, __selectedRoom, __pointer, __quickMenuPosition, __quickMenuState, __node } = useContext(RoomContext)\n    const [rooms, setRooms] = __rooms\n    const setSelectedRoom = __selectedRoom[1]\n    const [pointer, setPointer] = __pointer\n    const [quickMenuPosition, setQuickMenuPosition] = __quickMenuPosition\n    const [quickMenuState, setQuickMenuState] = __quickMenuState\n    const [node, setNode] = __node\n\n    const [isDragging, setIsDragging] = useState(false)\n    const [isLinking, setIsLinking] = useState(false)\n\n    const deleteRoom = (e: any) => {\n        if (isSelected) {\n            if (e.keyCode === 8) {\n                setRooms((rooms: any) => rooms.filter((el: any) => el.id !== room.id));\n            }\n        }\n    };\n\n    const roomClicked = e => {\n        e.preventDefault()\n\n        let coords = { x: null, y: null }\n\n        if (e.type === 'mouseup' || e.type === 'click') {\n            coords.x = e.clientX\n            coords.y = e.clientY\n            setPointer(coords)\n        } else {\n            console.log(e)\n            console.log(e.originalEvent)\n            coords.x = e.changedTouches[0].clientX\n            coords.y = e.changedTouches[0].clientY\n            setPointer(coords)\n        }\n\n        setQuickMenuPosition(coords)\n        setQuickMenuState(prev => !prev)\n        setNode(e.target)\n\n    }\n\n    const dragging = (e: any, dnd: DraggableData) => {\n        e.preventDefault()\n\n        setIsDragging(true)\n\n        const newRooms = [...rooms]\n        newRooms[i].x += dnd.deltaX\n        newRooms[i].y += dnd.deltaY\n\n        setRooms(newRooms)\n    };\n\n    const dragEnded = (e) => {\n\n        if (!isDragging) {\n            if (isSelected) { roomClicked(e)}\n            return\n        }\n        \n        setIsDragging(false)\n\n        const allPoints = getAllPoints(rooms)\n\n        room.getPoints().forEach(point => {\n            allPoints.forEach(otherPoint => {\n\n                let dx = Math.abs(point.absX - otherPoint.absX)\n                let dy = Math.abs(point.absY - otherPoint.absY)\n\n                if (point.room !== otherPoint.room) {\n                    if (dx <= 16) {\n                        rooms[i].points[point.i].x = otherPoint.absX - point.offsetX\n                    }\n                    if (dy <= 16) {\n                        rooms[i].points[point.i].y = otherPoint.absY - point.offsetY\n                    }\n                }\n            })\n        })\n        setRooms([...rooms])\n    }\n\n    return (\n        <DraggableCore\n            handle=\".room\"\n            cancel=\".corner, .segment, .doorCenter, .outlet, .switch, .lamp\"\n            disabled={!isSelected}\n            onStop={dragEnded}\n            onDrag={dragging}\n        >\n            <g\n                className={\"room\"}\n                id={room.id}\n                transform={`translate(${room.x} ${room.y})`}\n                onClick={(e) => {\n                    //if (isSelected) { roomClicked(e)}\n                    setSelectedRoom(room.id);\n                }}\n                onKeyDown={deleteRoom}\n                tabIndex={-1}\n                style={{ outline: 0 }}\n            >\n                <Floor\n                    polygon={getPolygon(room.getPoints())}\n                    isSelected={isSelected}\n                    roomId={room.id}\n                />\n\n                {\n                    getPath(room.getPoints()).map((pathPoints, index) => (\n                        <Segment\n                            key={index}\n                            pathPoints={pathPoints}\n                            visible={isSelected}\n                        />\n                    ))\n                }\n\n                {\n                    room.getPoints().map((point, index) => (\n                        <Point\n                            key={index}\n                            point={point}\n                            visible={isSelected}\n                        />\n                    ))\n                }\n                {\n                    getPath(room.getPoints()).map((pathPoints, index) => (\n                        <Size\n                            key={index}\n                            pathPoints={pathPoints}\n                            visible={isSelected}\n                        />\n                    ))\n                }\n                {\n                    room.doors.map((door, i) => (\n                        <Door\n                            key={i}\n                            door={door}\n                            i={i}\n                        />\n                    ))\n                }\n                {\n                    room.components.map((component, i) => (\n                        <Component\n                            key={i}\n                            component={component}\n                            i={i}\n                        />\n                    ))\n                }\n                \n            </g>\n        </DraggableCore>\n    );\n}\n\nexport default Room;\n\n","import React from 'react'\n\nconst Link = ({ link }) => {\n\n\n    const a = link[0].getBoundingClientRect()\n    const b = link[1].getBoundingClientRect()\n\n    const x1 = (a.left + a.right) / 2\n    const y1 = (a.top + a.bottom) / 2\n    const x2 = (b.left + b.right) / 2\n    const y2 = (b.top + b.bottom) / 2\n\n    const start = { x: x1, y: y1 }\n    const end = { x: x2, y: y2 }\n\n    const ctrl1 = {\n        x: ((start.x + end.x )/2 + 20),\n        y: ((start.y + end.y) /2 + 20)\n    }\n\n    const ctrl2 = {\n        x: ((start.x + end.x )/2 - 20),\n        y: ((start.y + end.y) /2 - 20)\n    }\n\n\n\n    return (\n\n        <g>\n            {/* <circle\n                cx={ctrl1.x} \n                cy={ctrl1.y}\n                r={4}\n                fill='white'\n                stroke='steelblue' \n            />\n            <circle\n                cx={ctrl2.x} \n                cy={ctrl2.y}\n                r={4}\n                fill='white'\n                stroke='steelblue' \n            /> */}\n\n            <path\n                d={`M ${start.x} ${start.y} C ${ctrl1.x} ${ctrl1.y}, ${ctrl2.x} ${ctrl2.y}, ${end.x} ${end.y}`}\n                stroke=\"red\"\n                strokeWidth={2}\n                fill=\"transparent\"\n                strokeDasharray={4}\n            />\n        </g>\n\n\n    )\n}\n\nexport default Link\n","import React, { useContext } from \"react\";\nimport Background from \"./Background\";\nimport Room from \"./Room\";\nimport Link from \"./../ELECTRICAL/Link\"\nimport Component from './../ELECTRICAL/Component'\nimport { RoomContext } from \"./../../RoomContext\";\nimport { linkSync } from \"fs\";\n\nexport default function Plan() {\n\n    const { __rooms, __selectedRoom, __components, __links } = useContext(RoomContext)\n\n    const [rooms] = __rooms;\n    const [links, setLinks] = __links\n    const [components] = __components\n    const [selectedRoom] = __selectedRoom;\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    return (\n        <svg\n            id='plan'\n            width={width}\n            height={height}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        >\n\n            <Background\n                width={width}\n                height={height}\n            />\n\n            {\n                rooms\n                    .sort((a, b) => {\n                        const c = (a.id === selectedRoom)\n                        const d = (b.id === selectedRoom)\n                        return (c === d) ? 0 : c ? 1 : - 1\n                    })\n                    .map((room, i) => {\n                        return (\n                            <Room\n                                key={room.id}\n                                isSelected={selectedRoom === room.id ? true : false}\n                                room={room}\n                                i={i}\n                            />\n                        );\n                    })\n            }\n\n            {\n                rooms.reduce((acc, curr, i) => {\n                    acc.push(...curr.doors)\n                    return acc\n                }, []).map((door, i) => {\n                    const room = rooms.find(({ id }) => id === door.doorId.split('.')[0])\n                    console.log('#' + door.doorId)\n\n                    // if (selectedRoom !== room.id) {\n                    return (\n                        <use\n                            key={i}\n                            xlinkHref={'#' + door.doorId}\n                            transform={`translate(${room.x} ${room.y})`}\n                        />\n                    )\n                    //} else return\n                })\n            }\n            {links.map((link, i) => {\n                return (\n                    <Link\n                        key={i}\n                        link={link}\n                    />\n                )\n            })\n            }\n\n        </svg>\n    );\n}\n","import React, { useContext } from 'react'\nimport { Menu, MenuItem } from '@material-ui/core'\nimport { getPointCoords, getAllPoints } from './../../utils'\nimport { RoomContext } from './../../RoomContext'\n\nconst QuickMenu = () => {\n\n    const {\n        __rooms,\n        __components,\n        __quickMenuPosition,\n        __quickMenuState,\n        __selectedPathPoints,\n        __pointer,\n        __componentPropertiesMenu,\n        __node\n    } = useContext(RoomContext)\n\n    const [rooms, setRooms] = __rooms\n    const [components, setComponents] = __components\n    const [quickMenuPosition, setQuickMenuPosition] = __quickMenuPosition\n    const [quickMenuState, setQuickMenuState] = __quickMenuState\n    const [selectedPathPoints] = __selectedPathPoints\n    const [pointer] = __pointer\n    const [componentPropertiesMenu, setComponentPropertiesMenu] = __componentPropertiesMenu\n    const [node, setNode] = __node\n\n    if (!node) return null\n\n    const handleClose = () => {\n        setQuickMenuState(false)\n        setQuickMenuPosition(null)\n    }\n\n    const addCorner = e => {\n        //e.persist()\n\n        const [a] = selectedPathPoints\n        const roomIndex = rooms.findIndex(room => room.id === a.room)\n\n        const x = pointer.x - rooms[roomIndex].x\n        const y = pointer.y - rooms[roomIndex].y\n\n        const newPoint = getPointCoords([x, y], selectedPathPoints)\n\n        getAllPoints(rooms).forEach(point => {\n            //console.log(newPoint)\n            if (Math.abs(point.absX - (newPoint.x + rooms[roomIndex].x)) < 16) {\n                newPoint.x = point.absX - rooms[roomIndex].x\n            }\n            if (Math.abs(point.absY - (newPoint.y + rooms[roomIndex].y)) < 16) {\n                newPoint.y = point.absY - rooms[roomIndex].y\n            }\n        })\n\n        const point1 = { ...newPoint }\n        const point2 = { ...newPoint }\n\n        rooms[roomIndex].points.splice(a.i + 1, 0, point1, point2)\n        setRooms([...rooms])\n\n        handleClose()\n    }\n\n    const addDoor = () => {\n\n        const [a, b] = selectedPathPoints\n\n        const roomIndex = rooms.findIndex(room => room.id === a.room)\n\n        const x = pointer.x - rooms[roomIndex].x\n        const y = pointer.y - rooms[roomIndex].y\n\n        const doorCenter = getPointCoords([x, y], selectedPathPoints)\n        const doorId = rooms[roomIndex].id + '.door.' + rooms[roomIndex].doors.length\n\n\n        const pointsIds = { a: a.id, b: b.id }\n\n        const door = { pointsIds, doorCenter, doorId }\n\n        rooms[roomIndex].doors.push(door)\n\n        setRooms([...rooms])\n\n        handleClose()\n    }\n\n    const addComponent = (e) => {\n\n        const room = rooms.find(({ id }) => id === node.id.split('.')[0])\n\n        const x = pointer.x - room.x\n        const y = pointer.y - room.y\n\n        const anchorPoint = { x, y }\n        const index = rooms.find(({ id }) => id === room.id).components.filter(({ category }) => category === e.target.id).length\n\n        const category = e.target.id\n        const id = room.id + `.${category}.` + index\n\n        let props\n\n        switch (e.target.id) {\n            case 'lamp':\n                props = {circuit : {name : '', number: ''}}\n                break;\n            case 'outlet':\n                props = {\n                    type: 1,\n                    grounding: true,\n                    shutter: true,\n                    circuit : {name : '', number: ''}\n                }\n                break;\n            case 'switch':\n                props = {\n                    way: 1,\n                    pole: 1,\n                    dimmer: false,\n                    illuminated: false,\n                    type: 'switch',\n                    circuit : {name : '', number: ''}\n                }\n                break;\n\n            default:\n                break;\n        }\n\n        const component = {\n            anchorPoint,\n            id,\n            category,\n            room,\n            node,\n            props\n        }\n\n        room.components.push(component)\n\n        setRooms([...rooms])\n        handleClose()\n    }\n\n    return (\n        <Menu\n            id=\"quickMenu\"\n            transitionDuration={{ enter: 0, exit: 0 }}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={\n                quickMenuPosition !== null\n                    ? { top: quickMenuPosition.y, left: quickMenuPosition.x }\n                    : undefined\n            }\n            open={quickMenuState}\n            onClose={handleClose}\n        >\n            {node.nodeName === 'path' ? <MenuItem onClick={addCorner}>add corner</MenuItem> : null}\n            {node.nodeName === 'path' ? <MenuItem onClick={addDoor}>add door</MenuItem> : null}\n            <MenuItem onClick={addComponent} id='outlet'>add outlet</MenuItem>\n            <MenuItem onClick={addComponent} id='switch'>add switch</MenuItem>\n            {node.nodeName === 'polygon' ? <MenuItem onClick={addComponent} id='lamp'>add lamp</MenuItem> : null}\n        </Menu>\n    )\n}\n\nexport default QuickMenu\n","import React from 'react'\nimport { Grid, Button } from '@material-ui/core'\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab'\n\nfunction SwitchProperties({ props, handleChange }) {\n\n    const { way, pole, dimmer, illuminated, type } = props\n\n    return (\n            <Grid container direction='column' spacing={1}>\n                <Grid item>\n                    <Grid\n                        container\n                        direction='column'\n                    >\n                        <Grid item xs={12}>\n                            <ToggleButtonGroup\n                                exclusive\n                                aria-label=\"text alignment\"\n                                value={type}\n                                onChange={handleChange}\n\n                            >\n                                <ToggleButton id='type' value={'switch'} selected={type === 'switch'}>Switch</ToggleButton>\n                                <ToggleButton id='type' value={'push'} selected={type === 'push'}>Push</ToggleButton>\n                                <ToggleButton id='type' value={'inverter'} selected={type === 'inverter'}>Inverter</ToggleButton>\n                            </ToggleButtonGroup>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ToggleButtonGroup\n                                exclusive\n                                aria-label=\"text alignment\"\n                                value={way}\n                                onChange={handleChange}\n\n                            >\n                                <ToggleButton\n                                    value={1}\n                                    id='way'\n                                    selected={way === 1 && type === 'switch'}\n                                    disabled={type !== 'switch'}\n\n                                >\n                                    Single throw\n                                </ToggleButton>\n\n                                <ToggleButton\n                                    value={2}\n                                    id='way'\n                                    selected={way === 2 && type === 'switch'}\n                                    disabled={type !== 'switch'}\n                                >\n                                    Double throw\n                                </ToggleButton>\n                            </ToggleButtonGroup>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <ToggleButtonGroup\n                                exclusive\n                                aria-label=\"text alignment\"\n                                value={pole}\n                                onChange={handleChange}\n                            >\n                                <ToggleButton\n                                    value={1}\n                                    id='pole'\n                                    selected={pole === 1 && type === 'switch'}\n                                    disabled={type !== 'switch'}\n\n                                >\n                                    Single Pole\n                                </ToggleButton>\n\n                                <ToggleButton\n                                    id='pole'\n                                    value={2}\n                                    selected={pole === 2 && type === 'switch'}\n                                    disabled={type !== 'switch'}\n\n                                >\n                                    Double Pole\n                                </ToggleButton>\n\n                            </ToggleButtonGroup>\n                        </Grid>\n                        <Grid item>\n                            <ToggleButton\n                                id='dimmer'\n                                value={dimmer}\n                                selected={dimmer}\n                                onChange={handleChange}\n                            >\n                                Dimmer\n                            </ToggleButton>\n                        </Grid>\n                        <Grid item>\n                            <ToggleButton\n                                id='illuminated'\n                                value={illuminated}\n                                selected={illuminated}\n                                onChange={handleChange}\n                            >\n                                Illuminated\n                            </ToggleButton>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Grid>\n\n    )\n}\n\nexport default SwitchProperties\n","import React from 'react'\nimport { Grid } from '@material-ui/core'\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab'\n\nfunction OutletProperties({ props, handleChange }) {\n\n    const { shutter, type, grounding } = props\n\n    return (\n        <Grid container direction='column' spacing={1}>\n            <Grid item>\n                <Grid\n                    container\n                    direction='column'\n                >\n                    <Grid item xs={12}>\n                        <ToggleButtonGroup\n                            exclusive\n                            aria-label=\"text alignment\"\n                            value={type}\n                            onChange={handleChange}\n\n                        >\n                            <ToggleButton id='type' value={1} selected={type === 1}>ONE</ToggleButton>\n                            <ToggleButton id='type' value={2} selected={type === 2}>TWO</ToggleButton>\n                            <ToggleButton id='type' value={3} selected={type === 3}>THREE</ToggleButton>\n                            <ToggleButton id='type' value={4} selected={type === 4}>FOOR</ToggleButton>\n                            <ToggleButton id='type' value={5} selected={type === 5}>FIVE</ToggleButton>\n                        </ToggleButtonGroup>\n                    </Grid>\n                </Grid>\n            </Grid>\n            <Grid item>\n                <Grid container justify=\"center\" spacing={0}>\n\n                    <Grid item xs={6} style={{ textAlign: \"center\" }} >\n                        <ToggleButton\n                            id='grounding'\n                            value={grounding}\n                            selected={grounding}\n                            onChange={handleChange}\n                        >\n                            Grounding\n                        </ToggleButton>\n                    </Grid>\n                    <Grid item xs={6} style={{ textAlign: \"center\" }} >\n                        <ToggleButton\n                            id='shutter'\n                            value={shutter}\n                            selected={shutter}\n                            onChange={handleChange}\n                        >\n                            Shutter</ToggleButton>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default OutletProperties\n","import React from 'react'\n\nfunction LampProperties(props) {\n    return (\n        <div>\n            lamp properties\n        </div>\n    )\n}\n\nexport default LampProperties\n","import React, { useState } from 'react'\nimport { TextField } from '@material-ui/core'\n\nfunction CircuitChooser({ circuit, handleChange }) {\n\n    const [name, setName] = useState(circuit.name)\n\n    const handleCircuitName = e => {\n        setName(e.target.value)\n        handleChange(e)\n    }\n\n    return (\n        <TextField\n            id=\"circuit\"\n            label=\"Circuit\"\n            margin=\"normal\"\n            variant='filled'\n            onChange={handleCircuitName}\n            value={name ? name.toUpperCase() : ''}\n        />\n    )\n}\n\nexport default CircuitChooser\n","import React, { useContext } from 'react'\nimport { Dialog, DialogTitle, Grid, Button, Typography } from '@material-ui/core'\nimport { RoomContext } from '../../RoomContext'\nimport SwitchProperties from './SwitchProperties'\nimport OutletProperties from './OutletProperties'\nimport LampProperties from './LampProperties'\nimport CircuitChooser from './CircuitChooser'\nimport { getAllElementsOnCircuit } from './../../utils'\n\nfunction ComponentPropertiesMenu() {\n\n    const { __componentPropertiesMenu, __rooms } = useContext(RoomContext)\n\n    const [componentPropertiesMenu, setComponentPropertiesMenu] = __componentPropertiesMenu\n    const [rooms, setRooms] = __rooms\n\n    const { open, component } = componentPropertiesMenu\n\n    if (!component) {\n        return null\n    }\n\n    const roomIndex = rooms.findIndex(({ id }) => id === component.room.id)\n    const componentIndex = rooms[roomIndex].components.findIndex(({ id }) => id === component.id)\n\n    const handleClose = () => {\n        setComponentPropertiesMenu({})\n    }\n\n    const handleChange = (e) => {\n\n        let newValue = e.currentTarget.value\n\n        if (newValue === 'true') newValue = false\n        else if (newValue === 'false') newValue = true\n        else if (newValue === '') newValue = ''\n        else if (!isNaN(newValue)) newValue = parseInt(newValue)\n\n        const property = e.currentTarget.id\n        if (property === 'circuit') {\n            rooms[roomIndex].components[componentIndex].props[property].name = newValue\n            rooms[roomIndex].components[componentIndex].props[property].number = getAllElementsOnCircuit(rooms, newValue)\n        }\n        else {\n            rooms[roomIndex].components[componentIndex].props[property] = newValue\n        }\n        setRooms([...rooms])\n\n    }\n\n    const renderSwitch = (category) => {\n        switch (category) {\n            case 'switch':\n                return <SwitchProperties props={component.props} handleChange={handleChange} />\n            case 'outlet':\n                return <OutletProperties props={component.props} handleChange={handleChange} />\n            case 'lamp':\n                return <LampProperties props={component.props} handleChange={handleChange} />\n            default:\n                break;\n        }\n    }\n\n    return (\n        <Dialog open={componentPropertiesMenu.open} onClose={handleClose}>\n            <DialogTitle>Set component properties</DialogTitle>\n            <Typography>\n                id : {component.id}\n            </Typography>\n            <CircuitChooser circuit={component.props.circuit} handleChange={handleChange} />\n\n            {\n                renderSwitch(component.category)\n            }\n            <Grid item>\n                <Button onClick={() => setComponentPropertiesMenu({ open: false })} variant=\"contained\" color=\"primary\" fullWidth>\n                    Save\n                    </Button>\n            </Grid>\n\n        </Dialog>\n    )\n}\n\nexport default ComponentPropertiesMenu\n","import React, { useContext } from 'react'\nimport { RoomContext } from '../../RoomContext'\nimport { Menu, MenuItem } from '@material-ui/core'\nimport SettingsIcon from '@material-ui/icons/Settings'\nimport LinearScaleIcon from '@material-ui/icons/LinearScale'\n\nfunction PreMenu() {\n\n    const { __preMenu, __anchorEl, __componentPropertiesMenu, __selectedComponent, __linkers } = useContext(RoomContext)\n    const [preMenu, setPreMenu] = __preMenu\n    const [anchorEl, setAnchorEl] = __anchorEl\n    const [componentPropertiesMenu, setComponentPropertiesMenu] = __componentPropertiesMenu\n    const [selectedComponent] = __selectedComponent\n    const [linkers, setLinkers] = __linkers\n\n    console.log(anchorEl)\n\n    const handleClose = () => {\n        setPreMenu({ open: false })\n        setAnchorEl(null)\n    }\n\n    const settingsClicked = () => {\n        console.log('premenu is clicked')\n        handleClose()\n        setComponentPropertiesMenu({ open: true, component: selectedComponent })\n    }\n\n    const linkerClicked = () => {\n        console.log(\"premenu is clicked 2\")\n        handleClose()\n        setLinkers(prev => [...prev, anchorEl])   \n    }\n\n    return (\n\n        <Menu\n            id=\"pre-menu\"\n            anchorEl={anchorEl}\n            //keepMounted\n            open={preMenu.open}\n            onClose={handleClose}\n        >\n            <MenuItem\n                onMouseDown={settingsClicked}\n        \n            >\n                <SettingsIcon />\n            </MenuItem>\n            <MenuItem\n                onMouseDown={linkerClicked}\n            >\n                <LinearScaleIcon />\n            </MenuItem>\n        </Menu>\n    )\n}\n\nexport default PreMenu\n","import React, { useState } from \"react\";\nimport Plan from \"./components/BUILDING/Plan\";\nimport \"./App.css\";\nimport QuickMenu from './components/UI/QuickMenu'\nimport { RoomContext } from './RoomContext'\nimport ComponentPropertiesMenu from \"./components/UI/ComponentPropertiesMenu\";\nimport PreMenu from \"./components/UI/PreMenu\";\n\nfunction App() {\n    const __rooms = useState([])\n    const __components = useState([])\n    const __links = useState([])\n    const __quickMenuPosition = useState(null)\n    const __quickMenuState = useState(false)\n    const __selectedRoom = useState(null)\n    const __selectedPathPoints = useState(null)\n    const __pointer = useState(null)\n    const __doors = useState([])\n    const __node = useState(null)\n    const __componentPropertiesMenu = useState({ open: false })\n    const __preMenu = useState({ open: false })\n    const __linkers = useState([])\n    const __anchorEl = useState(null)\n    const __selectedComponent = useState(null)\n    const __isLinking = useState(false)\n\n    const CTX = {\n        __rooms,\n        __components,\n        __links,\n        __quickMenuPosition,\n        __quickMenuState,\n        __selectedRoom,\n        __selectedPathPoints,\n        __pointer,\n        __doors,\n        __node,\n        __componentPropertiesMenu,\n        __linkers,\n        __preMenu,\n        __anchorEl,\n        __selectedComponent,\n        __isLinking\n    }\n\n    return (\n        <div\n            className=\"App\"\n            style={{ overscrollBehavior: \"none\" }}\n            onContextMenu={e => e.preventDefault()}\n        >\n            <RoomContext.Provider value={CTX}>\n                <Plan />\n                <QuickMenu />\n                <ComponentPropertiesMenu />\n                <PreMenu />\n            </RoomContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === \"[::1]\" ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n        ),\n);\n\ninterface Config {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(\n            (process as {env: {[key: string]: string}}).env.PUBLIC_URL,\n            window.location.href,\n        );\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        \"This web app is being served cache-first by a service \" +\n                            \"worker. To learn more, visit http://bit.ly/CRA-PWA\",\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === \"installed\") {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                \"New content is available and will be used when all \" +\n                                    \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\",\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log(\"Content is cached for offline use.\");\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get(\"content-type\");\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf(\"javascript\") === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                \"No internet connection found. App is running in offline mode.\",\n            );\n        });\n}\n\nexport function unregister() {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready.then((registration) => {\n            registration.unregister();\n        });\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}