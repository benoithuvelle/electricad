(this.webpackJsonpelectricad=this.webpackJsonpelectricad||[]).push([[0],{51:function(e,t,n){e.exports=n(62)},56:function(e,t,n){},57:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),i=n.n(a),c=(n(56),n(4)),l=n(3),s=Object(r.createContext)(null);function u(e){var t=e.width,n=e.height,a=Object(r.useContext)(s),i=a.__selectedRoom,u=a.__rooms,d=Object(l.a)(u,2),p=d[0],f=d[1],b=i[1],m=function(e){var r=window.prompt("D\xe9nomination de la pi\xe8ce");if(""!==r&&null!==r)if(p.find((function(e){return e.id===r})))alert("Une pi\xe8ce nomm\xe9e ".concat(r," existe d\xe9j\xe0. Cr\xe9ation annul\xe9e !!!"));else{var o={id:r,x:e.clientX?e.clientX-75:t/2,y:e.clientY?e.clientY-75:n/2,points:[{x:0,y:0},{x:0,y:200},{x:200,y:200},{x:200,y:0}],getPoints:function(){var e=this;return this.points.reduce((function(t,n,o){return t[o]={x:n.x,y:n.y,absX:n.x+e.x,absY:n.y+e.y,offsetX:e.x,offsetY:e.y,i:o,room:r,id:"".concat(e.id,".").concat(o)},t}),[])},doors:[],outlets:[],switches:[],lamps:[]};f([].concat(Object(c.a)(p),[o])),b(o.id)}};return o.a.createElement("rect",{style:{outline:"none"},tabIndex:-1,id:"background",width:t,height:n,fill:"#38a0f9",onDoubleClick:m,onClick:function(){return b(null)},onKeyDown:function(e){78===e.keyCode&&m(e)}})}var d=n(13);function p(e){return e.reduce((function(t,n,r){return t[r]=[n],r>0&&t[r-1].push(n),r===e.length-1&&t[r].push(t[0][0]),t}),[])}function f(e){return e.reduce((function(e,t,n){var r=t.getPoints();return e.push.apply(e,Object(c.a)(r)),e}),[])}var b=function(e,t){var n=Object(l.a)(t,2),r=n[0],o=n[1],a=Object(l.a)(e,2),i=a[0],c=a[1],s=(o.y-r.y)/(o.x-r.x),u=r.y-s*r.x;return 0===s?c=r.y:isFinite(s)?c=s*i+u:i=r.x,{x:i,y:c}};function m(e,t,n){var r=n.x-t.x,o=n.y-t.y,a=r*r+o*o,i=(e.x-t.x)*r+(e.y-t.y)*o,c=Math.min(1,Math.max(0,i/a));return i=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x),{point:{x:t.x+r*c,y:t.y+o*c},left:i<1,dot:i,t:c}}function h(e){var t=e.polygon,n=(e.isSelected,e.roomId),a=Object(r.useContext)(s);a.setPointer,a.setQuickMenuPosition,a.setQuickMenuState;return o.a.createElement("polygon",{id:"".concat(n+".floor"),points:t,fill:"#ffffaa",stroke:"steelblue",strokeWidth:8})}var y=function(e){var t=e.point,n=e.visible,a=Object(r.useContext)(s).__rooms,i=Object(l.a)(a,2),u=i[0],p=i[1],b=u.findIndex((function(e){return e.id===t.room}));return n?o.a.createElement(d.DraggableCore,{handle:".corner",onDrag:function(e,n){u[b].points[t.i].x=t.x+n.deltaX,u[b].points[t.i].y=t.y+n.deltaY,p(Object(c.a)(u))},onStop:function(){f(u).forEach((function(e){e.room===t.room&&e.i===t.i||(Math.abs(t.absX-e.absX)<16&&(u[b].points[t.i].x=e.absX-t.offsetX),Math.abs(t.absY-e.absY)<16&&(u[b].points[t.i].y=e.absY-t.offsetY))})),p(Object(c.a)(u))}},o.a.createElement("g",null,o.a.createElement("circle",{className:"corner",cx:t.x,cy:t.y,r:16,fill:"white",stroke:"#38a0f9",strokeWidth:4}),o.a.createElement("text",{x:t.x,y:t.y,textAnchor:"middle",alignmentBaseline:"central",pointerEvents:"none",fill:"grey"},t.i))):null},O=n(42);function g(e){var t=e.pathPoints,n=e.visible,a=Object(r.useContext)(s),i=a.__quickMenuPosition,u=a.__quickMenuState,p=a.__selectedPathPoints,b=a.__rooms,m=a.__pointer,h=a.__node,y=i[1],g=u[1],j=p[1],v=Object(l.a)(b,2),x=v[0],E=v[1],k=m[1],w=h[1],P=Object(r.useState)(!1),_=Object(l.a)(P,2),C=_[0],D=_[1],M=Object(l.a)(t,2),S=M[0],L=M[1],I=x.findIndex((function(e){return e.id===S.room})),X=[[S.x,S.y],[L.x,L.y]],Y=Object(O.a)().x((function(e){return e[0]})).y((function(e){return e[1]})),W=function(e){e.preventDefault();var n={x:null,y:null};"mouseup"===e.type?(n.x=e.clientX,n.y=e.clientY,k(n)):(console.log(e),console.log(e.originalEvent),n.x=e.changedTouches[0].clientX,n.y=e.changedTouches[0].clientY,k(n)),y(n),g((function(e){return!e})),j(t),w(e.target)};return o.a.createElement(d.DraggableCore,{handle:".segment",onDrag:function(e,t){D(!0),S.x+=t.deltaX,S.y+=t.deltaY,L.x+=t.deltaX,L.y+=t.deltaY,x[I].points[S.i].x=S.x,x[I].points[S.i].y=S.y,x[I].points[L.i].x=L.x,x[I].points[L.i].y=L.y,E(Object(c.a)(x))},onStop:function(e,n){if(C){D(!1);var r=f(x);t.forEach((function(e){r.forEach((function(t){e.id!==t.id&&(Math.abs(e.absX-t.absX)<=16&&(x[I].points[e.i].x=t.absX-e.offsetX),Math.abs(e.absY-t.absY)<=16&&(x[I].points[e.i].y=t.absY-e.offsetY))}))})),E(Object(c.a)(x))}else W(e)},cancel:".doorCenter, .outlet"},o.a.createElement("path",{style:n?{visibility:"visible"}:{visibility:"hidden"},d:Y(X),id:S.room+"."+S.i+"."+L.i,className:"segment",strokeWidth:20,stroke:"#77cfff",strokeLinecap:"round",strokeLinejoin:"round",opacity:.8}))}var j=function(e){var t=e.pathPoints,n=e.visible,r=Object(l.a)(t,2),a=r[0],i=r[1],c=a.x-i.x,s=a.y-i.y,u=Math.round(5*Math.floor(Math.sqrt(c*c+s*s)/5));return n?o.a.createElement("text",{style:{pointerEvents:"none",fill:"#404040"}},o.a.createElement("textPath",{startOffset:"45%",xlinkHref:"#"+a.room+"."+a.i+"."+i.i},u)):null},v=n(8);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){var t=e.door,n=e.i,a=Object(r.useContext)(s).__rooms,i=Object(l.a)(a,2),u=i[0],p=i[1],f=t.pointsIds,b=t.doorCenter,h=t.doorId,y=u.find((function(e){return e.id===f.a.split(".")[0]})),O=y.getPoints().find((function(e){return e.id===f.a})),g=y.getPoints().find((function(e){return e.id===f.b})),j={x:b.x-50,y:b.y-50},E={x:b.x+50,y:b.y+50},k=m(j,O,g).point,w=m(E,O,g).point;return o.a.createElement(d.DraggableCore,{handle:".doorCenter",onDrag:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b);r.x+=t.deltaX,r.y+=t.deltaY;var o=m(r,O,g);y.doors[n].doorCenter.x=o.point.x,y.doors[n].doorCenter.y=o.point.y,p(Object(c.a)(u))}},o.a.createElement("line",{className:"doorCenter",id:h,x1:k.x,y1:k.y,x2:w.x,y2:w.y,fill:"#ffffaa",stroke:"#ffffaa",strokeWidth:8}))}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.outlet,n=e.i,a=Object(r.useContext)(s),i=a.__rooms,u=a.__outletPropertiesMenu,p=Object(l.a)(i,2),f=p[0],b=p[1],h=Object(l.a)(u,2),y=(h[0],h[1]),O=t.anchorPoint,g=t.pointsIds,j=(t.outletId,t.props),v=j.grounding,x=j.shutter,E=j.type,k=f.find((function(e){return e.id===g.a.split(".")[0]})),P=k.getPoints().find((function(e){return e.id===g.a})),_=k.getPoints().find((function(e){return e.id===g.b})),C=m(O,P,_).point,D=180*Math.atan2(_.y-P.y,_.x-P.x)/Math.PI-90;return o.a.createElement(d.DraggableCore,{handle:".outlet",onDrag:function(e,t){var r=w({},O);r.x+=t.deltaX,r.y+=t.deltaY;var o=m(r,P,_);k.outlets[n].anchorPoint.x=o.point.x,k.outlets[n].anchorPoint.y=o.point.y,b(Object(c.a)(f))}},o.a.createElement("g",{className:"outlet",style:{pointerEvents:"all"},onClick:function(){y((function(e){return w({},e,{open:!0,outlet:t})}))}},o.a.createElement("g",{id:"1",transform:"translate(".concat(C.x," ").concat(C.y,") scale(1.75) rotate(").concat(D,")")},o.a.createElement("text",{transform:"translate(10 5.5) rotate(90)",fontSize:"50%"},1===E?null:E),o.a.createElement("g",{id:"2",transform:"translate(2 2)"},o.a.createElement("path",{d:"M3.54 11.58 L3.54 0.24",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:!0===v?"visible":"hidden"}),o.a.createElement("path",{d:"M8.27 1.2 L8.27 0.25",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:!0===x?"visible":"hidden"}),o.a.createElement("path",{d:"M8.27 11.6 L8.27 10.65",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:!0===x?"visible":"hidden"}),o.a.createElement("path",{d:"M8.27 10.65 A4.72441 4.72441 0 0 1 3.55 5.93 A4.72441 4.72441 0 0 1 8.27 1.2",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none"}),o.a.createElement("path",{d:"M3.54 5.92 L-0 5.92",id:"coucou",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none"})))))};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){var t=e.__switch,n=e.i,a=Object(r.useContext)(s),i=a.__rooms,u=a.__switchPropertiesMenu,p=Object(l.a)(i,2),f=p[0],b=p[1],h=Object(l.a)(u,2),y=(h[0],h[1]),O=t.anchorPoint,g=t.pointsIds,j=(t.switchId,t.props),v=j.way,x=j.pole,E=(j.dimmer,j.illuminated,j.type),k=Object(r.useState)(!1),w=Object(l.a)(k,2),P=w[0],_=w[1],D=f.find((function(e){return e.id===g.a.split(".")[0]})),M=D.getPoints().find((function(e){return e.id===g.a})),S=D.getPoints().find((function(e){return e.id===g.b})),L=m(O,M,S).point,I=180*Math.atan2(S.y-M.y,S.x-M.x)/Math.PI-90;return o.a.createElement(d.DraggableCore,{handle:".switch",onDrag:function(e,t){console.log(e.target),_(!0);var r=C({},O);r.x+=t.deltaX,r.y+=t.deltaY;var o=m(r,M,S);D.switches[n].anchorPoint.x=o.point.x,D.switches[n].anchorPoint.y=o.point.y,b(Object(c.a)(f))},onStop:function(e){if(!P)return console.log(e.target),void y((function(e){return C({},e,{open:!0,__switch:t})}));_(!1)}},o.a.createElement("g",{className:"switch",style:{pointerEvents:"all"}},o.a.createElement("g",{id:"1",transform:"translate(".concat(L.x," ").concat(L.y,") scale(1.75) rotate(").concat(I+90,")")},o.a.createElement("g",{id:"2",transform:"translate(0 -17)"},o.a.createElement("path",{d:"M8.55 10.53 A2.83465 2.83465 0 1 1 2.88 10.53 A2.83465 2.83465 0 1 1 8.55 10.53 Z",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none"}),o.a.createElement("path",{d:"M8.68 2.39 L10.65 3.11",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:2===x&&"switch"===E?"visible":"hidden"}),o.a.createElement("path",{d:"M6.69 7.87 L9.46 0.24 L11.44 0.96",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:"push"===E?"hidden":"visible"}),o.a.createElement("path",{d:"M8.55 10.53 A2.83465 2.83465 0 1 1 2.88 10.53 A2.83465 2.83465 0 1 1 8.55 10.53",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:"hidden"}),o.a.createElement("path",{d:"M2.76 18.68 L0.78 17.96",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:2===x&&"switch"===E&&2===v?"visible":"hidden"}),o.a.createElement("path",{d:"M4.75 13.2 L1.97 20.83 L0 20.11",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none",visibility:2===v&&"switch"===E?"visible":"hidden"})))))};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=function(e){var t=e.lamp,n=e.i,a=Object(r.useContext)(s),i=a.__rooms,u=(a.__lampPropertiesMenu,Object(l.a)(i,2)),p=u[0],f=u[1],b=t.anchorPoint,m=(t.id,b.x),h=b.y,y=p.find((function(e){var t=e.id;return t===t.split(".")[0]}));return o.a.createElement(d.DraggableCore,{handle:".lamp",onDrag:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b);r.x+=t.deltaX,r.y+=t.deltaY,y.lamps[n].anchorPoint.x=r.x,y.lamps[n].anchorPoint.y=r.y,f(Object(c.a)(p))}},o.a.createElement("g",{className:"lamp",transform:"translate(".concat(m," ").concat(h,") scale(1.75)")},o.a.createElement("rect",{x:0,y:0,height:12,width:12,visibility:"hidden",style:{pointerEvents:"all"}}),o.a.createElement("title",null,"Lighting"),o.a.createElement("g",{id:"1",transform:"translate(0.125,-0.125)",style:{pointerEvents:"all"}},o.a.createElement("title",null,"Lighting"),o.a.createElement("g",{id:"2",transform:"translate(8.27502,-7.97777) rotate(45)"},o.a.createElement("title",null,"Lighting"),o.a.createElement("path",{d:"M0 11.64 L15.91 11.64",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none"})),o.a.createElement("g",{id:"3",transform:"translate(19.6136,8.47777) rotate(135)"},o.a.createElement("title",null,"Lighting"),o.a.createElement("path",{d:"M0 11.64 L16.1 11.64",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,fill:"none"})))))};var L=function(e){var t,n=e.isSelected,a=e.room,i=e.i,u=Object(r.useContext)(s),b=u.__rooms,m=u.__selectedRoom,O=u.__pointer,v=u.__quickMenuPosition,x=u.__quickMenuState,k=u.__node,w=Object(l.a)(b,2),_=w[0],C=w[1],M=m[1],L=Object(l.a)(O,2),I=(L[0],L[1]),X=Object(l.a)(v,2),Y=(X[0],X[1]),W=Object(l.a)(x,2),A=(W[0],W[1]),N=Object(l.a)(k,2),q=(N[0],N[1]),R=Object(r.useState)(!1),T=Object(l.a)(R,2),B=T[0],H=T[1];return o.a.createElement(d.DraggableCore,{handle:".room",cancel:".corner, .segment, .doorCenter, .outlet, .switch, .lamp",disabled:!n,onStop:function(e){if(B){H(!1);var t=f(_);a.getPoints().forEach((function(e){t.forEach((function(t){var n=Math.abs(e.absX-t.absX),r=Math.abs(e.absY-t.absY);e.room!==t.room&&(n<=16&&(_[i].points[e.i].x=t.absX-e.offsetX),r<=16&&(_[i].points[e.i].y=t.absY-e.offsetY))}))})),C(Object(c.a)(_))}else n&&function(e){e.preventDefault(),console.log(e.type);var t={x:null,y:null};"mouseup"===e.type||"click"===e.type?(t.x=e.clientX,t.y=e.clientY,I(t)):(console.log(e),console.log(e.originalEvent),t.x=e.changedTouches[0].clientX,t.y=e.changedTouches[0].clientY,I(t)),Y(t),A((function(e){return!e})),q(e.target)}(e)},onDrag:function(e,t){e.preventDefault(),H(!0);var n=Object(c.a)(_);n[i].x+=t.deltaX,n[i].y+=t.deltaY,C(n)}},o.a.createElement("g",{className:"room",id:a.id,transform:"translate(".concat(a.x," ").concat(a.y,")"),onClick:function(e){M(a.id)},onKeyDown:function(e){n&&8===e.keyCode&&C((function(e){return e.filter((function(e){return e.id!==a.id}))}))},tabIndex:-1,style:{outline:0}},o.a.createElement(h,{polygon:(t=a.getPoints(),t.map((function(e){return[e.x,e.y].join(" ")}))),isSelected:n,roomId:a.id}),p(a.getPoints()).map((function(e,t){return o.a.createElement(g,{key:t,pathPoints:e,visible:n})})),a.getPoints().map((function(e,t){return o.a.createElement(y,{key:t,point:e,visible:n})})),p(a.getPoints()).map((function(e,t){return o.a.createElement(j,{key:t,pathPoints:e,visible:n})})),a.doors.map((function(e,t){return o.a.createElement(E,{key:t,door:e,i:t})})),a.outlets.map((function(e,t){return o.a.createElement(P,{key:t,outlet:e,i:t})})),a.switches.map((function(e,t){return o.a.createElement(D,{key:t,__switch:e,i:t})})),a.lamps.map((function(e,t){return o.a.createElement(S,{key:t,lamp:e,i:t})}))))};function I(){var e=Object(r.useContext)(s),t=e.__rooms,n=e.__selectedRoom,a=Object(l.a)(t,1)[0],i=Object(l.a)(n,1)[0],d=window.innerWidth,p=window.innerHeight;return o.a.createElement("svg",{id:"plan",width:d,height:p,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement(u,{width:d,height:p}),a.sort((function(e,t){var n=e.id===i;return n===(t.id===i)?0:n?1:-1})).map((function(e,t){return o.a.createElement(L,{key:e.id,isSelected:i===e.id,room:e,i:t})})),a.reduce((function(e,t,n){return e.push.apply(e,Object(c.a)(t.doors)),e}),[]).map((function(e,t){var n=a.find((function(t){return t.id===e.doorId.split(".")[0]}));return console.log("#"+e.doorId),o.a.createElement("use",{key:t,xlinkHref:"#"+e.doorId,transform:"translate(".concat(n.x," ").concat(n.y,")")})})))}n(57);var X=n(89),Y=n(91);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){var e=Object(r.useContext)(s),t=e.__quickMenuPosition,n=e.__quickMenuState,a=e.__selectedPathPoints,i=e.__rooms,u=e.__pointer,d=e.__outletPropertiesMenu,p=e.__switchPropertiesMenu,m=e.__node,h=Object(l.a)(t,2),y=h[0],O=h[1],g=Object(l.a)(n,2),j=g[0],v=g[1],x=Object(l.a)(a,1)[0],E=Object(l.a)(i,2),k=E[0],w=E[1],P=Object(l.a)(u,1)[0],_=Object(l.a)(d,2),C=(_[0],_[1]),D=Object(l.a)(p,2),M=(D[0],D[1]),S=Object(l.a)(m,2),L=S[0];S[1];if(!L)return null;var I=function(){v(!1),O(null)};return o.a.createElement(X.a,{id:"quickMenu",transitionDuration:{enter:0,exit:0},anchorReference:"anchorPosition",anchorPosition:null!==y?{top:y.y,left:y.x}:void 0,open:j,onClose:I},"path"===L.nodeName?o.a.createElement(Y.a,{onClick:function(e){var t=Object(l.a)(x,1)[0],n=k.findIndex((function(e){return e.id===t.room})),r=P.x-k[n].x,o=P.y-k[n].y,a=b([r,o],x);f(k).forEach((function(e){Math.abs(e.absX-(a.x+k[n].x))<16&&(a.x=e.absX-k[n].x),Math.abs(e.absY-(a.y+k[n].y))<16&&(a.y=e.absY-k[n].y)}));var i=A({},a),s=A({},a);k[n].points.splice(t.i+1,0,i,s),w(Object(c.a)(k)),I()}},"add corner"):null,"path"===L.nodeName?o.a.createElement(Y.a,{onClick:function(){var e=Object(l.a)(x,2),t=e[0],n=e[1],r=k.findIndex((function(e){return e.id===t.room})),o=P.x-k[r].x,a=P.y-k[r].y,i=b([o,a],x),s=k[r].id+".door."+k[r].doors.length,u={pointsIds:{a:t.id,b:n.id},doorCenter:i,doorId:s};k[r].doors.push(u),w(Object(c.a)(k)),I()}},"add door"):null,o.a.createElement(Y.a,{onClick:function(e){var t=Object(l.a)(x,2),n=t[0],r=t[1],o=k.find((function(e){return e.id===n.room})),a=P.x-o.x,i=P.y-o.y,s={a:n.id,b:r.id},u={type:1,grounding:!0,shutter:!0},d={anchorPoint:b([a,i],x),pointsIds:s,id:o.id+".outlet."+o.outlets.length,props:u};console.log(u),o.outlets.push(d),C((function(e){return A({},e,{open:!0,outlet:d})})),w(Object(c.a)(k)),I()}},"add outlet"),o.a.createElement(Y.a,{onClick:function(e){var t=Object(l.a)(x,2),n=t[0],r=t[1],o=k.find((function(e){return e.id===n.room})),a=P.x-o.x,i=P.y-o.y,s={a:n.id,b:r.id},u={anchorPoint:b([a,i],x),pointsIds:s,id:o.id+".switch."+o.switches.length,props:{way:1,pole:1,dimmer:!1,illuminated:!1,type:"switch"}};o.switches.push(u),M((function(e){return A({},e,{open:!0,__switch:u})})),w(Object(c.a)(k)),I()}},"add switch"),"polygon"===L.nodeName?o.a.createElement(Y.a,{onClick:function(e){var t=k.find((function(e){return e.id===L.id.split(".")[0]})),n={anchorPoint:{x:P.x-t.x,y:P.y-t.y},id:t.id+".lamp."+t.lamps.length};t.lamps.push(n),console.log(k),w(Object(c.a)(k)),I()}},"add lamp"):null)},q=n(90),R=n(92),T=n(85),B=n(87),H=n(93),F=n(86);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K=function(){var e=Object(r.useContext)(s),t=e.__outletPropertiesMenu,n=e.__rooms,a=Object(l.a)(t,2),i=a[0],u=a[1],d=Object(l.a)(n,2),p=d[0],f=d[1],b=i.open,m=i.outlet;if(!m)return null;var h=p.findIndex((function(e){return e.id===m.id.split(".")[0]})),y=p.find((function(e){return e.id===m.id.split(".")[0]})),O=y.outlets.findIndex((function(e){return e.id===m.id})),g=y.outlets.find((function(e){return e.id===m.id})).props,j=g.grounding,x=g.shutter,E=g.type;return o.a.createElement(q.a,{"aria-labelledby":"simple-dialog-title",open:b,onClose:function(){u((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{open:!1})}))}},o.a.createElement(R.a,{id:"simple-dialog-title"},"Set outlet properties"),o.a.createElement(T.a,{container:!0,direction:"column",spacing:1},o.a.createElement(T.a,{item:!0},o.a.createElement(T.a,{container:!0,direction:"column"},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(H.a,{exclusive:!0,"aria-label":"text alignment",value:E,onChange:function(e,t){p[h].outlets[O].props.type=t,f(Object(c.a)(p))}},o.a.createElement(F.a,{value:1,selected:1===E},"ONE"),o.a.createElement(F.a,{value:2,selected:2===E},"TWO"),o.a.createElement(F.a,{value:3,selected:3===E},"THREE"),o.a.createElement(F.a,{value:4,selected:4===E},"FOOR"),o.a.createElement(F.a,{value:5,selected:5===E},"FIVE"))))),o.a.createElement(T.a,{item:!0},o.a.createElement(T.a,{container:!0,justify:"center",spacing:0},o.a.createElement(T.a,{item:!0,xs:6,style:{textAlign:"center"}},o.a.createElement(F.a,{value:j,selected:j,onChange:function(e,t){return function(e,t){console.log(e),p[h].outlets[O].props.grounding=!t,f(Object(c.a)(p)),console.log(p)}(e,t)}},"Grounding")),o.a.createElement(T.a,{item:!0,xs:6,style:{textAlign:"center"}},o.a.createElement(F.a,{value:x,selected:x,onChange:function(e,t){console.log(e),p[h].outlets[O].props.shutter=!t,f(Object(c.a)(p))}},"Shutter")))),o.a.createElement(T.a,{item:!0},o.a.createElement(B.a,{onClick:function(){return u({open:!1})},variant:"contained",color:"primary",fullWidth:!0},"Save"))))};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=function(){var e=Object(r.useContext)(s),t=e.__switchPropertiesMenu,n=e.__rooms,a=Object(l.a)(t,2),i=a[0],u=a[1],d=Object(l.a)(n,2),p=d[0],f=d[1],b=i.open,m=i.__switch;if(!m)return null;var h=m.props,y=h.way,O=h.pole,g=h.dimmer,j=h.illuminated,x=h.type,E=p.findIndex((function(e){return e.id===m.id.split(".")[0]})),k=p.find((function(e){return e.id===m.id.split(".")[0]})),w=k.switches.findIndex((function(e){return e.id===m.id}));return k.switches.find((function(e){return e.id===m.id})),o.a.createElement(q.a,{"aria-labelledby":"simple-dialog-title",open:b,onClose:function(){u((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{open:!1})}))}},o.a.createElement(R.a,{id:"simple-dialog-title"},"Set switch properties"),o.a.createElement(T.a,{container:!0,direction:"column",spacing:1},o.a.createElement(T.a,{item:!0},o.a.createElement(T.a,{container:!0,direction:"column"},o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(H.a,{exclusive:!0,"aria-label":"text alignment",value:x,onChange:function(e,t){p[E].switches[w].props.type=t,f(Object(c.a)(p))}},o.a.createElement(F.a,{value:"switch",selected:"switch"===x},"Switch"),o.a.createElement(F.a,{value:"push",selected:"push"===x},"Push"),o.a.createElement(F.a,{value:"inverter",selected:"inverter"===x},"Inverter"))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(H.a,{exclusive:!0,"aria-label":"text alignment",value:y,onChange:function(e,t){p[E].switches[w].props.way=t,f(Object(c.a)(p))}},o.a.createElement(F.a,{value:1,selected:1===y&&"switch"===x,disabled:"switch"!==x},"Single throw"),o.a.createElement(F.a,{value:2,selected:2===y&&"switch"===x,disabled:"switch"!==x},"Double throw"))),o.a.createElement(T.a,{item:!0,xs:12},o.a.createElement(H.a,{exclusive:!0,"aria-label":"text alignment",value:O,onChange:function(e,t){p[E].switches[w].props.pole=t,f(Object(c.a)(p))}},o.a.createElement(F.a,{value:1,selected:1===O&&"switch"===x,disabled:"switch"!==x},"Single Pole"),o.a.createElement(F.a,{value:2,selected:2===O&&"switch"===x,disabled:"switch"!==x},"Double Pole"))),o.a.createElement(T.a,{item:!0},o.a.createElement(F.a,{value:g,selected:g,onChange:function(e,t){p[E].switches[w].props.dimmer=!t,f(Object(c.a)(p))}},"Dimmer")),o.a.createElement(T.a,{item:!0},o.a.createElement(F.a,{value:j,selected:j,onChange:function(e,t){p[E].switches[w].props.illuminated=!t,f(Object(c.a)(p))}},"Illuminated")))),o.a.createElement(T.a,{item:!0},o.a.createElement(T.a,{container:!0,justify:"center",spacing:0},o.a.createElement(T.a,{item:!0,xs:6,style:{textAlign:"center"}}),o.a.createElement(T.a,{item:!0,xs:6,style:{textAlign:"center"}}))),o.a.createElement(T.a,{item:!0},o.a.createElement(B.a,{onClick:function(){return u({open:!1})},variant:"contained",color:"primary",fullWidth:!0},"Save"))))};var G=function(){var e=Object(r.useState)(null),t=Object(r.useState)(!1),n=Object(r.useState)([]),a={__quickMenuPosition:e,__quickMenuState:t,__selectedRoom:Object(r.useState)(null),__rooms:n,__selectedPathPoints:Object(r.useState)(null),__pointer:Object(r.useState)(null),__doors:Object(r.useState)([]),__node:Object(r.useState)(null),__outletPropertiesMenu:Object(r.useState)({open:!1}),__switchPropertiesMenu:Object(r.useState)({open:!1})};return o.a.createElement("div",{className:"App",style:{overscrollBehavior:"none"},onContextMenu:function(e){return e.preventDefault()}},o.a.createElement(s.Provider,{value:a},o.a.createElement(I,null),o.a.createElement(N,null),o.a.createElement(K,null),o.a.createElement(z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.4cfe7cc6.chunk.js.map